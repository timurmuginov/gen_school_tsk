// Проверка наличия элемента с id "input-countries" и инициализация плагина intlTelInput
const input = document.querySelector("#input-countries");
if (input) {
    // start
    const iti = intlTelInput(input, {
        initialCountry: 'ru',
        separateDialCode: true,
        // onlyCountries: ["ru", "by", "kz"], // Отобразить только эти страны
        excludeCountries: ["ax", "ac", "vi"], // Исключить страны
        i18n: {
            "af": "Афганистан",
            "al": "Албания",
            "dz": "Алжир",
            "as": "Американское Самоа",
            "ad": "Андорра",
            "ao": "Ангола",
            "ai": "Ангилья",
            "aq": "Антарктида",
            "ag": "Антигуа и Барбуда",
            "ar": "Аргентина",
            "am": "Армения",
            "aw": "Аруба",
            "au": "Австралия",
            "at": "Австрия",
            "az": "Азербайджан",
            "bs": "Багамские острова",
            "bh": "Бахрейн",
            "bd": "Бангладеш",
            "bb": "Барбадос",
            "by": "Беларусь",
            "be": "Бельгия",
            "bz": "Белиз",
            "bj": "Бенин",
            "bm": "Бермуды",
            "bt": "Бутан",
            "bo": "Боливия",
            "ba": "Босния и Герцеговина",
            "bw": "Ботсвана",
            "br": "Бразилия",
            "io": "Британская территория в Индийском океане",
            "vg": "Британские Виргинские острова",
            "bn": "Бруней-Даруссалам",
            "bg": "Болгария",
            "bf": "Буркина-Фасо",
            "bi": "Бурунди",
            "kh": "Камбоджа",
            "cm": "Камерун",
            "ca": "Канада",
            "cv": "Кабо-Верде",
            "bq": "Бонэйр, Синт-Эстатиус и Саба",
            "ky": "Каймановы острова",
            "cf": "Центральноафриканская Республика",
            "td": "Чад",
            "cl": "Чили",
            "cn": "Китай",
            "cx": "Остров Рождества",
            "cc": "Кокосовые острова",
            "co": "Колумбия",
            "km": "Коморы",
            "cg": "Конго",
            "cd": "Конго, Демократическая Республика",
            "ck": "Острова Кука",
            "cr": "Коста-Рика",
            "ci": "Кот-д'Ивуар",
            "hr": "Хорватия",
            "cu": "Куба",
            "cw": "Кюрасао",
            "cy": "Кипр",
            "cz": "Чехия",
            "dk": "Дания",
            "dj": "Джибути",
            "dm": "Доминика",
            "do": "Доминиканская Республика",
            "ec": "Эквадор",
            "eg": "Египет",
            "sv": "Сальвадор",
            "gq": "Экваториальная Гвинея",
            "er": "Эритрея",
            "ee": "Эстония",
            "sz": "Эсватини",
            "et": "Эфиопия",
            "fk": "Фолклендские острова",
            "fo": "Фарерские острова",
            "fj": "Фиджи",
            "fi": "Финляндия",
            "fr": "Франция",
            "gf": "Французская Гвиана",
            "pf": "Французская Полинезия",
            "ga": "Габон",
            "gm": "Гамбия",
            "ge": "Грузия",
            "de": "Германия",
            "gh": "Гана",
            "gi": "Гибралтар",
            "gr": "Греция",
            "gl": "Гренландия",
            "gd": "Гренада",
            "gp": "Гваделупа",
            "gu": "Гуам",
            "gt": "Гватемала",
            "gg": "Гернси",
            "gn": "Гвинея",
            "gw": "Гвинея-Бисау",
            "gy": "Гайана",
            "ht": "Гаити",
            "hn": "Гондурас",
            "hk": "Гонконг (САР Китай)",
            "hu": "Венгрия",
            "is": "Исландия",
            "in": "Индия",
            "id": "Индонезия",
            "ir": "Иран",
            "iq": "Ирак",
            "ie": "Ирландия",
            "im": "Остров Мэн",
            "il": "Израиль",
            "it": "Италия",
            "jm": "Ямайка",
            "jp": "Япония",
            "je": "Джерси",
            "jo": "Иордания",
            "kz": "Казахстан",
            "ke": "Кения",
            "ki": "Кирибати",
            "kw": "Кувейт",
            "kg": "Киргизия",
            "la": "Лаос",
            "lv": "Латвия",
            "lb": "Ливан",
            "ls": "Лесото",
            "lr": "Либерия",
            "ly": "Ливия",
            "li": "Лихтенштейн",
            "lt": "Литва",
            "lu": "Люксембург",
            "mo": "Макао (САР Китай)",
            "mg": "Мадагаскар",
            "mw": "Малави",
            "my": "Малайзия",
            "mv": "Мальдивы",
            "ml": "Мали",
            "mt": "Мальта",
            "mh": "Маршалловы острова",
            "mq": "Мартиника",
            "mr": "Мавритания",
            "mu": "Маврикий",
            "yt": "Майотта",
            "mx": "Мексика",
            "fm": "Микронезия",
            "md": "Молдова",
            "mc": "Монако",
            "mn": "Монголия",
            "me": "Черногория",
            "ms": "Монтсеррат",
            "ma": "Марокко",
            "mz": "Мозамбик",
            "mm": "Мьянма (Бирма)",
            "na": "Намибия",
            "nr": "Науру",
            "np": "Непал",
            "nl": "Нидерланды",
            "nc": "Новая Каледония",
            "nz": "Новая Зеландия",
            "ni": "Никарагуа",
            "ne": "Нигер",
            "ng": "Нигерия",
            "nu": "Ниуэ",
            "nf": "Остров Норфолк",
            "kp": "Северная Корея",
            "mk": "Северная Македония",
            "mp": "Северные Марианские острова",
            "no": "Норвегия",
            "om": "Оман",
            "pk": "Пакистан",
            "pw": "Палау",
            "ps": "Палестинские территории",
            "pa": "Панама",
            "pg": "Папуа — Новая Гвинея",
            "py": "Парагвай",
            "pe": "Перу",
            "ph": "Филиппины",
            "pl": "Польша",
            "pt": "Португалия",
            "pr": "Пуэрто-Рико",
            "qa": "Катар",
            "re": "Реюньон",
            "ro": "Румыния",
            "ru": "Россия",
            "rw": "Руанда",
            "ws": "Самоа",
            "sm": "Сан-Марино",
            "st": "Сан-Томе и Принсипи",
            "sa": "Саудовская Аравия",
            "sn": "Сенегал",
            "rs": "Сербия",
            "sc": "Сейшельские Острова",
            "sl": "Сьерра-Леоне",
            "sg": "Сингапур",
            "sx": "Синт-Мартен",
            "sk": "Словакия",
            "si": "Словения",
            "sb": "Соломоновы Острова",
            "so": "Сомали",
            "za": "Южная Африка",
            "kr": "Южная Корея",
            "ss": "Южный Судан",
            "es": "Испания",
            "lk": "Шри-Ланка",
            "bl": "Сен-Бартельми",
            "sh": "Святая Елена",
            "kn": "Сент-Китс и Невис",
            "lc": "Сент-Люсия",
            "mf": "Сен-Мартен",
            "pm": "Сен-Пьер и Микелон",
            "vc": "Сент-Винсент и Гренадины",
            "sd": "Судан",
            "sr": "Суринам",
            "se": "Швеция",
            "ch": "Швейцария",
            "sy": "Сирия",
            "tw": "Тайвань",
            "tj": "Таджикистан",
            "tz": "Танзания",
            "th": "Таиланд",
            "tl": "Восточный Тимор",
            "tg": "Того",
            "tk": "Токелау",
            "to": "Тонга",
            "tt": "Тринидад и Тобаго",
            "tn": "Тунис",
            "tr": "Турция",
            "tm": "Туркменистан",
            "tc": "Теркс и Кайкос",
            "tv": "Тувалу",
            "ug": "Уганда",
            "ua": "Украина",
            "ae": "Объединенные Арабские Эмираты",
            "gb": "Великобритания",
            "us": "США",
            "uy": "Уругвай",
            "uz": "Узбекистан",
            "vu": "Вануату",
            "va": "Ватикан",
            "ve": "Венесуэла",
            "vn": "Вьетнам",
            "wf": "Уоллис и Футуна",
            "ye": "Йемен",
            "zm": "Замбия",
            "zw": "Зимбабве",
            "ax": "Аландские острова",
            "sh": "Остров Вознесения",
            "xk": "Косово",
            "sj": "Шпицберген и Ян-Майен",
            "vi": "Виргинские острова США",
            "eh": "Западная Сахара",
            "selectedCountryAriaLabel": "Выбранная страна",
            "noCountrySelected": "Страна не выбрана",
            "countryListAriaLabel": "Список стран",
            "searchPlaceholder": "Поиск",
            "zeroSearchResults": "Результаты не найдены",
            "oneSearchResult": "1 результат найден",
            "multipleSearchResults": "${count} результатов найдено"
        }
    // end
    });

    // Кастомная функция для получения полного номера
    function getFullPhoneNumber() {
        const countryCode = iti.getSelectedCountryData().dialCode; // Получаем код страны
        const phoneNumber = input.value.replace(/\D/g, ''); // Удаляем все нецифровые символы
        return `+${countryCode}${phoneNumber}`; // Возвращаем полный номер с кодом страны
    }

    // Обработчик отправки формы
    const form = document.querySelector("#registration-phone-form");
    form.addEventListener("submit", function(event) {
        event.preventDefault(); // Предотвращение стандартной отправки формы
        const fullPhoneNumber = getFullPhoneNumber(); // Получение полного номера
        $("#intlTelInputHidden").val(fullPhoneNumber); // Установка значения в скрытое поле
        console.log("Полный номер телефона:", fullPhoneNumber); // Логирование номера в консоль
        this.submit(); // Отправка формы после обновления значения
    });
      

}